"use strict";(self.webpackChunkcms=self.webpackChunkcms||[]).push([[237],{8217:(W,r,s)=>{s.d(r,{a:()=>P,g:()=>n});var a=s(97003),o=s(47289);function n(l){if(!l)return null;const i=Object.entries(a.W.colors).filter(([,O])=>O.toUpperCase()===l.toUpperCase()).reduce((O,[T])=>(o.S?.[T]&&(O=T),O),null);return i?{themeColorName:i,name:o.S[i]}:null}function P(){return Object.entries(o.S).map(([l,d])=>({hex:a.W.colors[l].toUpperCase(),name:d}))}},47289:(W,r,s)=>{s.d(r,{A:()=>i,C:()=>U,D:()=>S,R:()=>o,S:()=>C,a:()=>K,b:()=>I,c:()=>O,d:()=>E,e:()=>n,f:()=>P,g:()=>d,h:()=>l,i:()=>f,j:()=>t,k:()=>T,l:()=>_,m:()=>e,n:()=>M});var a=s(97003);const o="settings_review-workflows",n="Settings/Review_Workflows/RESET_WORKFLOW",P="Settings/Review_Workflows/SET_CONTENT_TYPES",l="Settings/Review_Workflows/SET_IS_LOADING",d="Settings/Review_Workflows/SET_ROLES",i="Settings/Review_Workflows/SET_WORKFLOW",O="Settings/Review_Workflows/SET_WORKFLOWS",T="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",E="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",t="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",_="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",e="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",M="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",f="Settings/Review_Workflows/WORKFLOW_UPDATE",C={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},I=a.W.colors.primary600,S={STAGE:"stage"},U="numberOfWorkflows",K="stagesPerWorkflow"},40237:(W,r,s)=>{s.r(r),s.d(r,{REVIEW_WORKFLOW_COLUMNS_EE:()=>u,REVIEW_WORKFLOW_FILTERS:()=>y});var a=s(88220),o=s(48396),n=s(74081),P=s(8295),l=s(61121),d=s(63738),i=s(10701),O=s(32370),T=s(77970),E=s(61020),t=s(58661),_=s(8217),e=s(87006),M=s(15816),f=s(97442),C=s(13576),I=s(87830),S=s(47184),U=s(364),K=s(27279),F=s(59461),k=s(71563),G=s(49204),j=s(47853),$=s(74919),x=s(29206),V=s(40464),Y=s(98934),Z=s(43433),z=s(75719),Q=s(8175),H=s(6078),J=s(51943),X=s(55783),b=s(92249),q=s(41942),ss=s(22919),ts=s(53915),_s=s(75041),es=s(30200),as=s(91379),os=s(33299),ns=s(33409),Es=s(63645),rs=s(7988),ls=s(7055),is=s(26757),Os=s(58311),ds=s(24840),Ts=s(29510),Ps=s(16946),Ms=s(10124),Ws=s(69530),Ds=s(86961),ms=s(51527),Rs=s(19764),As=s(42982),vs=s(26126),Ls=s(46413),gs=s(47289);const B=({value:m,onChange:v})=>{const{formatMessage:R}=(0,E.Z)(),{data:L,isLoading:g}=(0,a.k)(),A=L?.users||[];return(0,n.jsx)(P.hQ,{value:m,"aria-label":R({id:"content-manager.components.Filters.usersSelect.label",defaultMessage:"Search and select an user to filter"}),onChange:v,loading:g,children:A.map(D=>(0,n.jsx)(l.O,{value:D.id.toString(),children:(0,a.l)(D,R)},D.id))})},h=({value:m,onChange:v,uid:R})=>{const{formatMessage:L}=(0,E.Z)(),{workflows:g,isLoading:A}=(0,t.u)({filters:{contentTypes:R}}),[D]=g??[];return(0,n.jsx)(d.q4,{"aria-label":L({id:"content-manager.components.Filters.reviewWorkflows.label",defaultMessage:"Search and select an workflow stage to filter"}),value:m,onChange:v,loading:A,customizeContent:()=>(0,n.jsxs)(i.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,n.jsx)(O.Z,{textColor:"neutral800",ellipsis:!0,children:m}),A?(0,n.jsx)(T.a,{small:!0,style:{display:"flex"}}):null]}),children:(D?.stages??[]).map(({id:N,color:w,name:c})=>{const{themeColorName:p}=(0,_.g)(w)??{};return(0,n.jsx)(d.ag,{startIcon:(0,n.jsx)(i.k,{height:2,background:w,borderColor:p==="neutral0"?"neutral150":void 0,hasRadius:!0,shrink:0,width:2}),value:c,children:c},N)})})},u=[{key:`__${o.S}_temp_key__`,name:o.S,fieldSchema:{type:"relation",relation:"oneToMany",target:"admin::review-workflow-stage"},metadatas:{label:{id:(0,a.o)("containers.ListPage.table-headers.reviewWorkflows.stage"),defaultMessage:"Review stage"},searchable:!1,sortable:!0,mainField:{name:"name",type:"string"}}},{key:`__${o.A}_temp_key__`,name:o.A,fieldSchema:{type:"relation",target:"admin::user",relation:"oneToMany"},metadatas:{label:{id:(0,a.o)("containers.ListPage.table-headers.reviewWorkflows.assignee"),defaultMessage:"Assignee"},searchable:!1,sortable:!0,mainField:{name:"firstname",type:"string"}}}],y=[{fieldSchema:{type:"relation",mainField:{name:"name",schema:{type:"string"}}},metadatas:{customInput:h,label:{id:(0,a.o)("containers.ListPage.table-headers.reviewWorkflows.stage"),defaultMessage:"Review stage"}},name:"strapi_stage"},{fieldSchema:{type:"relation",mainField:{name:"id",schema:{type:"integer"}}},metadatas:{customInput:B,customOperators:[{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$eq",defaultMessage:"is"},value:"$eq"},{intlLabel:{id:"components.FilterOptions.FILTER_TYPES.$ne",defaultMessage:"is not"},value:"$ne"}],label:{id:(0,a.o)("containers.ListPage.table-headers.reviewWorkflows.assignee.label"),defaultMessage:"Assignee"}},name:"strapi_assignee"}]},48396:(W,r,s)=>{s.d(r,{A:()=>o,S:()=>a});const a="strapi_stage",o="strapi_assignee"},46413:(W,r,s)=>{s.d(r,{a:()=>i,b:()=>O,c:()=>n,d:()=>P,e:()=>d,f:()=>l,u:()=>T});var a=s(88220);const o=a.m.injectEndpoints({endpoints:E=>({getWorkflows:E.query({query:t=>{const{id:_,...e}=t??{};return{url:`/admin/review-workflows/workflows/${_??""}`,method:"GET",config:{params:e}}},transformResponse:t=>{let _=[];return Array.isArray(t.data)?_=t.data:_=[t.data],{workflows:_,meta:"meta"in t?t.meta:void 0}},providesTags:(t,_,e)=>typeof e=="object"&&"id"in e?[{type:"User",id:e.id}]:[...t?.workflows.map(({id:M})=>({type:"ReviewWorkflow",id:M}))??[],{type:"ReviewWorkflow",id:"LIST"}]}),createWorkflow:E.mutation({query:t=>({url:"/admin/review-workflows/workflows",method:"POST",body:t}),transformResponse:t=>t.data,invalidatesTags:[{type:"ReviewWorkflow",id:"LIST"}]}),updateWorkflow:E.mutation({query:({id:t,..._})=>({url:`/admin/review-workflows/workflows/${t}`,method:"PUT",body:_}),transformResponse:t=>t.data,invalidatesTags:(t,_,e)=>[{type:"ReviewWorkflow",id:e.id}]}),deleteWorkflow:E.mutation({query:({id:t})=>({url:`/admin/review-workflows/workflows/${t}`,method:"DELETE"}),transformResponse:t=>t.data,invalidatesTags:(t,_,e)=>[{type:"ReviewWorkflow",id:e.id}]}),getStages:E.query({query:({model:t,slug:_,id:e})=>({url:`/admin/content-manager/${_}/${t}/${e}/stages`,method:"GET"}),transformResponse:t=>({meta:t.meta??{workflowCount:0},stages:t.data??[]}),providesTags:(t,_,e)=>[{type:"ReviewWorkflowStage",id:e.id}]}),updateStage:E.mutation({query:({model:t,slug:_,id:e,...M})=>({url:`/admin/content-manager/${_}/${t}/${e}/stage`,method:"PUT",body:M}),transformResponse:t=>t.data,invalidatesTags:(t,_,e)=>[{type:"ReviewWorkflowStage",id:e.id}]}),updateAssignee:E.mutation({query:({model:t,slug:_,id:e,...M})=>({url:`/admin/content-manager/${_}/${t}/${e}/assignee`,method:"PUT",body:M}),transformResponse:t=>t.data})}),overrideExisting:!1}),{useGetWorkflowsQuery:n,useCreateWorkflowMutation:P,useDeleteWorkflowMutation:l,useUpdateWorkflowMutation:d,useGetStagesQuery:i,useUpdateStageMutation:O,useUpdateAssigneeMutation:T}=o},58661:(W,r,s)=>{s.d(r,{u:()=>o});var a=s(46413);function o(n={}){const{id:P="",...l}=n,{data:d,isLoading:i}=(0,a.c)({id:P,populate:"stages",...l}),[O]=(0,a.d)(),[T]=(0,a.e)(),[E]=(0,a.f)(),{workflows:t,meta:_}=d??{};return{meta:_,workflows:t,isLoading:i,createWorkflow:O,updateWorkflow:T,deleteWorkflow:E}}}}]);
